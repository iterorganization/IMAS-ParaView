# VTKGGDTools
IMAS GGD-VTK is a tool to convert GGD ([Generalized Grid Description](https://imas-data-dictionary.readthedocs.io/en/latest/ggd_guide/doc.html)) 
structures to VTK formats, and back. This is complemented by a number of Paraview plugins that can visualise both GGD and non-GGD IDS data in Paraview. 

For an overview of the different types of IDS data that can be loaded, see the [documentation](https://sharepoint.iter.org/departments/POP/CM/IMDesign/Code%20Documentation/GGD-VTK/usage.html).

## Running on SDCC
Use the following instructions to launch Paraview:
```bash
module load GGD-VTK
# Launch Paraview
paraview
# Open the "Sources" tab in the top left, and ensure you see "IMAS Tools" in 
# the drop down menu.
```

Use the following instructions to start the command-line interface:
```bash
module load GGD-VTK
# Run the command-line interface
vtkggdtools --help
# You will now see the CLI help message which explains the available commands
```

## Running development version on SDCC
Use the following instructions from the root of the project directory to run paraview:
```bash
# Load compatible IMASPy, IMAS and ParaView modules, like:
# AL5 and ParaView 5.12 (recommended on RHEL9):
module load IMASPy/1.1.1-foss-2023b \
IMAS-AL-Python/5.3.0-foss-2023b-DD-3.42.0 ParaView/5.12.0-foss-2023b
# export environment variables, this assumes the current
# working directory is the root of the repository
export PV_PLUGIN_PATH=$PWD/vtkggdtools/plugins:$PV_PLUGIN_PATH
export PYTHONPATH=$PWD:$PYTHONPATH
# Run paraview
paraview
# Open the "Sources" tab in the top left.
# If you see "IMAS Tools" in the drop down, it is installed correctly.
```

Use the following instructions from the root of the project directory to run the 
command line interface:
```bash
# Load compatible IMASPy, IMAS and ParaView modules, like:
module load IMASPy/1.1.1-foss-2023b \
IMAS-AL-Python/5.3.0-foss-2023b-DD-3.42.0 ParaView/5.12.0-foss-2023b
# create virtual environment and install dependencies
python3 -m venv ./venv
. venv/bin/activate
pip install --upgrade pip
pip install --upgrade wheel setuptools
# For development install in editable mode
pip install -e .[all]
# Run CLI with help information
vtkggdtools --help
# If you see the help page of the vtkggdtools, it is installed correctly.
```

## Documentation
Documentation is autogenerated from the source using [Sphinx](http://sphinx-doc.org/)
and can be found at the [ITER sharepoint](https://sharepoint.iter.org/departments/POP/CM/IMDesign/Code%20Documentation/GGD-VTK/index.html).

The documentation can be manually generated by installing sphinx and running:
```bash
make -C docs html
```
Open `docs/_build/html/index.html`.


If some dependencies are missing, create a python virtual environment and install them:
```bash
python -m venv --system-site-packages venv
source venv/bin/activate
pip install --upgrade .[docs]
make -C docs clean html
```
